{% extends 'base.html.twig' %}


{# chargement CSS et JS dédier à cette page #} 
{% block stylesheets %}
    {{ parent() }} {# on conserve ce qui a été charg dans base.html.twig #}
    {{ encore_entry_link_tags('panier') }}
{% endblock %}

{% block javascripts %}
    {{ parent() }} {# on conserve ce qui a été charg dans base.html.twig #}
    {{ encore_entry_script_tags('panier') }}
{% endblock %}

{% block title %}Votre panier{% endblock %}

{% block body %}



<div class="disposition-panier">

    <div class="recap-panier">
        <h2>Votre panier</h2>
        <div class="panier">

            <section class="liste-article">
                {{ form_start(formQuantitePanier, {'attr': {'id': 'form-panier'}}) }}

                {# Boucle sur tous les champs enfants de formQuantitePanier.articles #}
                {# articles contient une liste de tableaux associatifs #}
                {# index correspond à l'index du tableaux, field à son contenu (une instance de Panier #}
                {# index est utilisé pour le slicing dans 'panier'=> $panier #}
                {% for id, field in formQuantitePanier.articles %}
                    <div class="article" data-id="{{ panier[id].id }}" data-produit="{{ panier[id].exemplaire.produit.id }}">
                        <div class="article-info">
                            {{ panier[id].id }} {{ panier[id].exemplaire }}
                            <div class="barrette">
                                {% for marquage in panier[id].exemplaire.marquages %}
                                    {{ marquage.texteTypo }}
                                {% endfor %}
                            </div>
                        </div>

                        <div class="article-quantite">
                            <p>Quantité</p>
                            <div class="quantite" data-article-id="{{ panier[id].id }}">
                                {# <button type="button" class="btn-moins">-</button> #}
                                {# Champ du formulaire #}
                                {{ form_widget(field.quantite, {'attr': {'class': 'quantite-input'}}) }}
                                {# <button type="button" class="btn-plus">+</button> #}
                            </div>
                            {# <small>Prix unitaire</small> #}
                        </div>

                        <div class="article-total">
                            <p>Prix</p>
                            <span id="prix-total"> €</span></p>
                            
                            <input type="hidden" id="prix-unitaire" value="0.5">
                            <input type="hidden" id="prix-unitaire-avant" value="1">
                            <input type="hidden" id="prix-unitaire-arriere" value="2">
                        </div>

                        <div class="article-supprimer">
                            <a href="{{ path('panier_supprimer', {'id': panier[id].id}) }}"><i class="fa-solid fa-xmark"></i></a>
                        </div>

                    </div>
                {% endfor %}

                {{ form_end(formQuantitePanier) }}
            </section>

            <section class="total-commande">
                <h2>Total</h2>
                <span id="prix-total-global"> €</span></p>

                <button form="form-panier" type="submit" class="btn-vert choisir-exemplaire">Valider la commande</button>
           
           
            </section>
        </div>
            
    </div>
</div>









{% endblock %}
